"use strict";
Object.defineProperty($e44c8873c2b34600f2b2adcd6257f18b$exports, "__esModule", {
    value: true
});
$e44c8873c2b34600f2b2adcd6257f18b$exports.JSONHTTPError = $e44c8873c2b34600f2b2adcd6257f18b$exports.TextHTTPError = $e44c8873c2b34600f2b2adcd6257f18b$exports.HTTPError = $e44c8873c2b34600f2b2adcd6257f18b$exports.getPagination = undefined;
var $e44c8873c2b34600f2b2adcd6257f18b$var$_extends = Object.assign || function(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i];
        for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];
    }
    return target;
};
var $e44c8873c2b34600f2b2adcd6257f18b$var$_createClass = function() {
    function defineProperties(target, props) {
        for(var i = 0; i < props.length; i++){
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }
    return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
    };
}();
import   "e44c8873c2b34600f2b2adcd6257f18b:./pagination";
Object.defineProperty($e44c8873c2b34600f2b2adcd6257f18b$exports, "getPagination", {
    enumerable: true,
    get: function get() {
        return $e44c8873c2b34600f2b2adcd6257f18b$import$6315d97ac186f90f$959928a149ecccae;
    }
});
function $e44c8873c2b34600f2b2adcd6257f18b$var$_classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function");
}
function $e44c8873c2b34600f2b2adcd6257f18b$var$_possibleConstructorReturn(self, call) {
    if (!self) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return call && (typeof call === "object" || typeof call === "function") ? call : self;
}
function $e44c8873c2b34600f2b2adcd6257f18b$var$_inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
    subClass.prototype = Object.create(superClass && superClass.prototype, {
        constructor: {
            value: subClass,
            enumerable: false,
            writable: true,
            configurable: true
        }
    });
    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}
function $e44c8873c2b34600f2b2adcd6257f18b$var$_extendableBuiltin(cls) {
    function ExtendableBuiltin() {
        var instance = Reflect.construct(cls, Array.from(arguments));
        Object.setPrototypeOf(instance, Object.getPrototypeOf(this));
        return instance;
    }
    ExtendableBuiltin.prototype = Object.create(cls.prototype, {
        constructor: {
            value: cls,
            enumerable: false,
            writable: true,
            configurable: true
        }
    });
    if (Object.setPrototypeOf) Object.setPrototypeOf(ExtendableBuiltin, cls);
    else ExtendableBuiltin.__proto__ = cls;
    return ExtendableBuiltin;
}
var $e44c8873c2b34600f2b2adcd6257f18b$var$HTTPError = $e44c8873c2b34600f2b2adcd6257f18b$exports.HTTPError = function(_extendableBuiltin2) {
    $e44c8873c2b34600f2b2adcd6257f18b$var$_inherits(HTTPError, _extendableBuiltin2);
    function HTTPError(response) {
        $e44c8873c2b34600f2b2adcd6257f18b$var$_classCallCheck(this, HTTPError);
        var _this = $e44c8873c2b34600f2b2adcd6257f18b$var$_possibleConstructorReturn(this, (HTTPError.__proto__ || Object.getPrototypeOf(HTTPError)).call(this, response.statusText));
        _this.name = _this.constructor.name;
        if (typeof Error.captureStackTrace === "function") Error.captureStackTrace(_this, _this.constructor);
        else _this.stack = new Error(response.statusText).stack;
        _this.status = response.status;
        return _this;
    }
    return HTTPError;
}($e44c8873c2b34600f2b2adcd6257f18b$var$_extendableBuiltin(Error));
var $e44c8873c2b34600f2b2adcd6257f18b$var$TextHTTPError = $e44c8873c2b34600f2b2adcd6257f18b$exports.TextHTTPError = function(_HTTPError) {
    $e44c8873c2b34600f2b2adcd6257f18b$var$_inherits(TextHTTPError, _HTTPError);
    function TextHTTPError(response, data) {
        $e44c8873c2b34600f2b2adcd6257f18b$var$_classCallCheck(this, TextHTTPError);
        var _this2 = $e44c8873c2b34600f2b2adcd6257f18b$var$_possibleConstructorReturn(this, (TextHTTPError.__proto__ || Object.getPrototypeOf(TextHTTPError)).call(this, response));
        _this2.data = data;
        return _this2;
    }
    return TextHTTPError;
}($e44c8873c2b34600f2b2adcd6257f18b$var$HTTPError);
var $e44c8873c2b34600f2b2adcd6257f18b$var$JSONHTTPError = $e44c8873c2b34600f2b2adcd6257f18b$exports.JSONHTTPError = function(_HTTPError2) {
    $e44c8873c2b34600f2b2adcd6257f18b$var$_inherits(JSONHTTPError, _HTTPError2);
    function JSONHTTPError(response, json) {
        $e44c8873c2b34600f2b2adcd6257f18b$var$_classCallCheck(this, JSONHTTPError);
        var _this3 = $e44c8873c2b34600f2b2adcd6257f18b$var$_possibleConstructorReturn(this, (JSONHTTPError.__proto__ || Object.getPrototypeOf(JSONHTTPError)).call(this, response));
        _this3.json = json;
        return _this3;
    }
    return JSONHTTPError;
}($e44c8873c2b34600f2b2adcd6257f18b$var$HTTPError);
var $e44c8873c2b34600f2b2adcd6257f18b$var$API = function() {
    function API() {
        var apiURL = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
        var options = arguments[1];
        $e44c8873c2b34600f2b2adcd6257f18b$var$_classCallCheck(this, API);
        this.apiURL = apiURL;
        if (this.apiURL.match(/\/[^\/]?/)) // eslint-disable-line no-useless-escape
        this._sameOrigin = true;
        this.defaultHeaders = options && options.defaultHeaders || {
        };
    }
    $e44c8873c2b34600f2b2adcd6257f18b$var$_createClass(API, [
        {
            key: "headers",
            value: function headers() {
                var _headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
                };
                return $e44c8873c2b34600f2b2adcd6257f18b$var$_extends({
                }, this.defaultHeaders, {
                    "Content-Type": "application/json"
                }, _headers);
            }
        },
        {
            key: "parseJsonResponse",
            value: function parseJsonResponse(response) {
                return response.json().then(function(json) {
                    if (!response.ok) return Promise.reject(new $e44c8873c2b34600f2b2adcd6257f18b$var$JSONHTTPError(response, json));
                    var pagination = $e44c8873c2b34600f2b2adcd6257f18b$import$6315d97ac186f90f$959928a149ecccae(response);
                    return pagination ? {
                        pagination: pagination,
                        items: json
                    } : json;
                });
            }
        },
        {
            key: "request",
            value: function request(path) {
                var _this4 = this;
                var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
                };
                var headers = this.headers(options.headers || {
                });
                if (this._sameOrigin) options.credentials = options.credentials || "same-origin";
                return fetch(this.apiURL + path, $e44c8873c2b34600f2b2adcd6257f18b$var$_extends({
                }, options, {
                    headers: headers
                })).then(function(response) {
                    var contentType = response.headers.get("Content-Type");
                    if (contentType && contentType.match(/json/)) return _this4.parseJsonResponse(response);
                    if (!response.ok) return response.text().then(function(data) {
                        return Promise.reject(new $e44c8873c2b34600f2b2adcd6257f18b$var$TextHTTPError(response, data));
                    });
                    return response.text().then(function(data) {
                    });
                });
            }
        }
    ]);
    return API;
}();
$e44c8873c2b34600f2b2adcd6257f18b$exports.default = $e44c8873c2b34600f2b2adcd6257f18b$var$API;
