var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
var _gotrueJs = require("gotrue-js");
var _gotrueJsDefault = parcelHelpers.interopDefault(_gotrueJs);
let user;
let user2;
let loggedIn = false;
checkUser();
function checkUser() {
    let auth = new _gotrueJsDefault.default({
        APIUrl: "https://confident-hoover-cccfcc.netlify.app/.netlify/identity",
        setCookie: true
    });
}
if (localStorage.getItem("user") === null) {
    console.log("naa dude");
    setSidebar();
}
if (localStorage.getItem("user") !== null) {
    user = JSON.parse(localStorage.getItem("user"));
    console.log(user);
    setUser();
    setSidebar();
}
function setUser() {
    user2 = auth.currentUser();
    console.log(user2);
    loggedIn = true;
    // document.querySelector(".username").innerHTML =
    //   user.user_metadata.data.full_name;
    document.querySelector(".logout").addEventListener("click", handleLogout);
}
function handleLogout() {
    user2.logout().then((response)=>{
        location.reload();
        loggedIn = false;
        console.log("User logged out");
    }).catch((error)=>{
        console.log("Failed to logout user: %o", error);
        throw error;
    });
    setSidebar();
}
function setSidebar() {
    console.log("setSide");
    if (loggedIn === true) {
        document.querySelector(".sidebar-logged-out").classList.add("hide");
        document.querySelector(".sidebar-logged-in").classList.remove("hide");
    }
    if (loggedIn === false) {
        document.querySelector(".sidebar-logged-out").classList.remove("hide");
        document.querySelector(".sidebar-logged-in").classList.add("hide");
    }
}
