{"mappings":"YAAAA,SAASC,iBAAgB,uDAajBC,QAAiBC,MAAMC,GAC7BC,QAAkBH,EAASI,wBAQrBC,EAAYP,SAASQ,cAAa,eAClCC,EAAgBT,SAASQ,cAAa,YAC5CD,EAAUG,UAAS,GACnBL,EAAUM,SAASC,QACbC,EAAQJ,EAAcK,WAAU,GAAMC,QAC1CF,EAAML,cAAa,eAAgBQ,YAAcJ,EAAMK,MAAMC,SAC7DL,EAAML,cAAa,cAAeE,UAAYE,EAAMO,QACpDN,EAAML,cAAa,cAAeY,IAAMR,EAAMK,MAAMC,SACpDL,EAAML,cAAa,iBAAkBQ,YAAcJ,EAAMS,OACzDR,EAAML,cAAa,WAAYc,aAAY,KAAK,SAAWV,EAAMW,UACjEV,EAAML,cAAa,eAAgBQ,YAAcJ,EAAMY,MAEvDjB,EAAUkB,YAAYZ,MAnBxBa,GAEA1B,SAASQ,cAAa,WAAYP,iBAAgB,QAAU0B,GAC5D3B,SAASQ,cAAa,SAAUP,iBAAgB,QAAU2B,oBAoBpDC,EAAW7B,SAAS8B,iBAAgB,aAsCpCC,EAAQ,IAAOC,sBAlCP,CAAIC,EAASF,KACzBE,EAAQtB,SAASuB,iBACPC,GAAWD,EAEfA,EAAME,mBAAqB,IAC7BC,QAAQC,IAAIJ,EAAME,mBAClBG,EAAeL,EAAMC,OAAOK,GAC5BC,EAAiBC,SAASH,EAAaI,MAAK,KAAM,GAAI,IAEtDN,QAAQC,IAAG,YACXD,QAAQC,IAAIG,EAAgBZ,EAASe,QACrC5C,SAASQ,cAAa,YAEpBE,UAAS,GAAM+B,KAAkBZ,EAASe,SAExCH,IAAmBZ,EAASe,OAC9B5C,SAASQ,cAAa,WAAYqC,UAAUC,IAAG,kBAE/C9C,SAASQ,cAAa,WAAYqC,UAAUE,SAAQ,mBAEpD/C,SAASQ,cAAa,WAAYqC,UAAUG,OAAM,kBAE7B,IAAnBP,EACFzC,SAASQ,cAAa,SAAUqC,UAAUC,IAAG,kBAE7C9C,SAASQ,cAAa,SAAUqC,UAAUE,SAAQ,mBAElD/C,SAASQ,cAAa,SAAUqC,UAAUG,OAAM,mBAGlDX,QAAQC,IAAG,YAjCJ,CACXW,UAAS,CAAG,GAAK,MAsCnBpB,EAASlB,SAASuC,IAChBnB,EAASoB,QAAQD,MA5DnBE,GAVAC,MARFC,OAAOrD,iBAAgB,yBA8FjBsD,EAAYvD,SAASwD,KAAKC,WAAazD,SAAS0D,gBAAgBD,UAChEE,EACF3D,SAAS0D,gBAAgBE,aACzB5D,SAAS0D,gBAAgBG,aACvBC,EAAYP,EAAYI,EAAU,IAEtC3D,SAASQ,cAAa,iBAAkBuD,MAAMC,MAAQF,EAAQ,IAC9D9D,SAASQ,cAAa,eAAgBuD,MAAME,UAAS,UACxC,GAAXH,iBApGE1D,EAAQ,kEACVC,EAEAkC,EACAE,WA2EKd,IACP3B,SACGQ,cAAa,UAAWiC,EAAiB,KACzCyB,eAAc,CAAGC,SAAQ,SAAYC,MAAK,MAASC,OAAM,qBAGrDzC,IACP5B,SACGQ,cAAa,WAAWiC,EAAiB,IACzCyB,eAAc,CAAGC,SAAQ,SAAYC,MAAK,MAASC,OAAM","sources":["compendium.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", start);\r\nwindow.addEventListener(\"scroll\", fillBar);\r\n\r\nconst endpoint = \"https://www.ddalby.dk/florbs/wordpress/wp-json/wp/v2/florbs\";\r\nlet allFlorbs;\r\nlet filter = \"all\";\r\nlet visibleFlorb;\r\nlet currentFlorbId;\r\nfunction start() {\r\n  getData();\r\n}\r\n\r\nasync function getData() {\r\n  const response = await fetch(endpoint);\r\n  allFlorbs = await response.json();\r\n  showFlorbs();\r\n\r\n  document.querySelector(\".a-down\").addEventListener(\"click\", clickNext);\r\n  document.querySelector(\".a-up\").addEventListener(\"click\", clickPrev);\r\n  observe1();\r\n}\r\nfunction showFlorbs() {\r\n  const container = document.querySelector(\".compendium\");\r\n  const florbTemplate = document.querySelector(\"template\");\r\n  container.innerHTML = \"\";\r\n  allFlorbs.forEach((florb) => {\r\n    let clone = florbTemplate.cloneNode(true).content;\r\n    clone.querySelector(\".florb-name\").textContent = florb.title.rendered;\r\n    clone.querySelector(\".florb-img\").innerHTML = florb.svgpath;\r\n    clone.querySelector(\".florb-img\").alt = florb.title.rendered;\r\n    clone.querySelector(\".florb-phrase\").textContent = florb.phrase;\r\n    clone.querySelector(\"article\").setAttribute(\"id\", `florb-${florb.number}`);\r\n    clone.querySelector(\".florb-desc\").textContent = florb.story;\r\n\r\n    container.appendChild(clone);\r\n  });\r\n}\r\nfunction observe1() {\r\n  const sections = document.querySelectorAll(\".florbers\");\r\n  const options = {\r\n    threshold: [0.1, 0.5],\r\n  };\r\n  const callback = (entries, observer) => {\r\n    entries.forEach((entry) => {\r\n      const { target } = entry;\r\n\r\n      if (entry.intersectionRatio >= 0.5) {\r\n        console.log(entry.intersectionRatio);\r\n        visibleFlorb = entry.target.id;\r\n        currentFlorbId = parseInt(visibleFlorb.split(\"-\")[1], 10);\r\n\r\n        console.log(\"in sight\");\r\n        console.log(currentFlorbId, sections.length);\r\n        document.querySelector(\r\n          \".current\"\r\n        ).innerHTML = `${currentFlorbId}/${sections.length}`;\r\n\r\n        if (currentFlorbId === sections.length) {\r\n          document.querySelector(\".a-down\").classList.add(\"disabled-arrow\");\r\n        } else if (\r\n          document.querySelector(\".a-down\").classList.contains(\"disabled-arrow\")\r\n        ) {\r\n          document.querySelector(\".a-down\").classList.remove(\"disabled-arrow\");\r\n        }\r\n        if (currentFlorbId === 1) {\r\n          document.querySelector(\".a-up\").classList.add(\"disabled-arrow\");\r\n        } else if (\r\n          document.querySelector(\".a-up\").classList.contains(\"disabled-arrow\")\r\n        ) {\r\n          document.querySelector(\".a-up\").classList.remove(\"disabled-arrow\");\r\n        }\r\n      } else {\r\n        console.log(\"yup\");\r\n      }\r\n    });\r\n  };\r\n  const observer = new IntersectionObserver(callback, options);\r\n\r\n  sections.forEach((section) => {\r\n    observer.observe(section);\r\n  });\r\n}\r\nfunction clickNext() {\r\n  document\r\n    .querySelector(`#florb-${currentFlorbId + 1}`)\r\n    .scrollIntoView({ behavior: \"smooth\", block: \"end\", inline: \"nearest\" });\r\n}\r\n\r\nfunction clickPrev() {\r\n  document\r\n    .querySelector(`#florb-${currentFlorbId - 1}`)\r\n    .scrollIntoView({ behavior: \"smooth\", block: \"end\", inline: \"nearest\" });\r\n}\r\n\r\nfunction fillBar() {\r\n  let winScroll = document.body.scrollTop || document.documentElement.scrollTop;\r\n  let height =\r\n    document.documentElement.scrollHeight -\r\n    document.documentElement.clientHeight;\r\n  let scrolled = (winScroll / height) * 100;\r\n\r\n  document.querySelector(\".progress-bar\").style.width = scrolled + \"%\";\r\n  document.querySelector(\".scroll-img\").style.transform = `rotate(${\r\n    scrolled * 25\r\n  }deg)`;\r\n}\r\n"],"names":["document","addEventListener","response","fetch","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$endpoint","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$allFlorbs","json","container","querySelector","florbTemplate","innerHTML","forEach","florb","clone","cloneNode","content","textContent","title","rendered","svgpath","alt","phrase","setAttribute","number","story","appendChild","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$showFlorbs","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$clickNext","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$clickPrev","sections","querySelectorAll","observer","IntersectionObserver","entries","entry","target","intersectionRatio","console","log","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$visibleFlorb","id","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$currentFlorbId","parseInt","split","length","classList","add","contains","remove","threshold","section","observe","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$observe1","$bc3eb4a6fb41aa8e549ae9cac072cbaa$var$getData","window","winScroll","body","scrollTop","documentElement","height","scrollHeight","clientHeight","scrolled","style","width","transform","scrollIntoView","behavior","block","inline"],"version":3,"file":"florbs.HASH_REF_dbdf77d6f9fdd76bf20785e1443f6534.js.map"}